import { Implementation, Preview, Display, TechnologyUsed, Wrapper, Header, ImportsWrapper } from "@/components/mdx/MDXServerImports"
import { CodeBlock, ResizableDisplay } from "@/components/mdx/MDXClientImports"

export const Data = {
    name: "Pagination with page grid",
    tags: [],
    description: "The Pagination component features buttons for incrementing and decrementing pages, as well as direct access to specific page numbers, making it user-friendly and efficient. Additionally, it includes optional event handlers for custom behavior when pages change, enhancing its flexibility for various use cases.",
    version_included: "0.2.0",
    display: true
}

<Wrapper>

<ImportsWrapper>
import {PaginationImplementation} from "@/packages/primitives/pagination/Pagination_2"

</ImportsWrapper>

<Header />
<Preview> 
<Display>
<PaginationImplementation />
</Display>

</Preview>

<Implementation>


<TechnologyUsed technologies={[ "tailwind-css" , "twMerge", "react-aria" ]}/>

<CodeBlock> 
```tsx|Pagination
"use client";

import { Fragment, useState } from "react";
import { Button, Group } from "react-aria-components";
import { twMerge } from "tailwind-merge";

type PaginationProps = {
  initialPage: number;
  totalPage: number;
  limit?: number;
  pageChangeHandler?: (page: number) => void;
};
export function Pagination({
  initialPage,
  totalPage,
  limit = 5,
  pageChangeHandler,
}: PaginationProps) {
  const [currentPage, setCurrentPage] = useState<number>(initialPage);

  const handleNext = () => {
    if (currentPage < totalPage) pageHandler(currentPage + 1);
  };
  const handlePrev = () => {
    if (currentPage > 1) pageHandler(currentPage - 1);
  };

  const pageHandler = (value: number) => {
    setCurrentPage(value);
    pageChangeHandler && pageChangeHandler(value);
  };
  return (
    <Group className="flex justify-center  text-primary-foreground border-[1px] border-outline  rounded-md bg-primary focus-within:ring-2 focus-within:ring-secondary">
      <Button
        className="w-full py-2 px-4 border-r-[1px] border-outline disabled:cursor-not-allowed disabled:text-muted-foreground  pressed:bg-secondary  rounded-l-[inherit] outline-none transition-colors duration-100 ease-linear"
        onPress={handlePrev}
        isDisabled={currentPage === 1}
        slot="decrement"
      >
        Prev
      </Button>
      <SeriesButton
        state="prev"
        currentPage={currentPage}
        pageHandler={pageHandler}
        limit={limit}
        totalPage={totalPage}
      />
      {new Array(limit).fill(0).map((val, index) => (
        <Fragment key={index}>
          {limit * Math.floor((currentPage - 1) / limit) + index + 1 <=
            totalPage && (
            <SoloPage
              value={limit * Math.floor((currentPage - 1) / limit) + index + 1}
              currentPage={currentPage}
              pageHandler={pageHandler}
            />
          )}
        </Fragment>
      ))}
      <SeriesButton
        state="next"
        currentPage={currentPage}
        pageHandler={pageHandler}
        limit={limit}
        totalPage={totalPage}
      />
      <Button
        className="w-full py-2 px-4 border-l-[1px] border-outline disabled:cursor-not-allowed disabled:text-muted-foreground  pressed:bg-secondary  rounded-r-[inherit] outline-none transition-colors duration-100 ease-linear"
        onPress={handleNext}
        isDisabled={currentPage === totalPage}
        slot="increment"
      >
        Next
      </Button>
    </Group>
  );
}

const SoloPage = ({
  value,
  currentPage,
  pageHandler,
}: {
  value: number;
  currentPage: number;
  pageHandler: (page: number) => void;
}) => {
  return (
    <Button
      onPress={() => pageHandler(value)}
      className={twMerge(
        "w-6 px-4 flex justify-center items-center hover:bg-secondary transition-colors duration-200 ease-linear",
        value === currentPage && "bg-secondary"
      )}
    >
      {value}
    </Button>
  );
};

const SeriesButton = ({
  state,
  currentPage,
  limit,
  totalPage,
  pageHandler,
}: {
  state: "next" | "prev";
  currentPage: number;
  limit: number;
  totalPage: number;
  pageHandler: (page: number) => void;
}) => {
  return (
    <>
      {state === "prev" && currentPage > limit && totalPage > limit && (
        <Button
          onPress={() => pageHandler(Math.floor(currentPage / limit) * limit)}
          className={twMerge(
            "w-6 px-4 flex justify-center items-center hover:bg-secondary"
          )}
        >
          ...
        </Button>
      )}
      {state === "next" &&
        Math.ceil(currentPage / limit) < Math.ceil(totalPage / limit) &&
        totalPage > limit && (
          <Button
            onPress={() =>
              pageHandler(Math.ceil(currentPage / limit) * limit + 1)
            }
            className={twMerge(
              "w-6 h-full px-4 flex justify-center items-center hover:bg-secondary"
            )}
          >
            ...
          </Button>
        )}
    </>
  );
};
```
```jsx|Pagination
"use client";

import { Fragment, useState } from "react";
import { Button, Group } from "react-aria-components";
import { twMerge } from "tailwind-merge";

export function Pagination({
  initialPage,
  totalPage,
  limit = 5,
  pageChangeHandler,
}) {
  const [currentPage, setCurrentPage] = useState(initialPage);

  const handleNext = () => {
    if (currentPage < totalPage) pageHandler(currentPage + 1);
  };
  const handlePrev = () => {
    if (currentPage > 1) pageHandler(currentPage - 1);
  };

  const pageHandler = (value) => {
    setCurrentPage(value);
    pageChangeHandler && pageChangeHandler(value);
  };
  return (
    <Group className="flex justify-center  text-primary-foreground border-[1px] border-outline  rounded-md bg-primary focus-within:ring-2 focus-within:ring-secondary">
      <Button
        className="w-full py-2 px-4 border-r-[1px] border-outline disabled:cursor-not-allowed disabled:text-muted-foreground  pressed:bg-secondary  rounded-l-[inherit] outline-none transition-colors duration-100 ease-linear"
        onPress={handlePrev}
        isDisabled={currentPage === 1}
        slot="decrement"
      >
        Prev
      </Button>
      <SeriesButton
        state="prev"
        currentPage={currentPage}
        pageHandler={pageHandler}
        limit={limit}
        totalPage={totalPage}
      />
      {new Array(limit).fill(0).map((val, index) => (
        <Fragment key={index}>
          {limit * Math.floor((currentPage - 1) / limit) + index + 1 <=
            totalPage && (
            <SoloPage
              value={limit * Math.floor((currentPage - 1) / limit) + index + 1}
              currentPage={currentPage}
              pageHandler={pageHandler}
            />
          )}
        </Fragment>
      ))}
      <SeriesButton
        state="next"
        currentPage={currentPage}
        pageHandler={pageHandler}
        limit={limit}
        totalPage={totalPage}
      />
      <Button
        className="w-full py-2 px-4 border-l-[1px] border-outline disabled:cursor-not-allowed disabled:text-muted-foreground  pressed:bg-secondary  rounded-r-[inherit] outline-none transition-colors duration-100 ease-linear"
        onPress={handleNext}
        isDisabled={currentPage === totalPage}
        slot="increment"
      >
        Next
      </Button>
    </Group>
  );
}

const SoloPage = ({
  value,
  currentPage,
  pageHandler,
}) => {
  return (
    <Button
      onPress={() => pageHandler(value)}
      className={twMerge(
        "w-6 px-4 flex justify-center items-center hover:bg-secondary transition-colors duration-200 ease-linear",
        value === currentPage && "bg-secondary"
      )}
    >
      {value}
    </Button>
  );
};

const SeriesButton = ({
  state,
  currentPage,
  limit,
  totalPage,
  pageHandler,
}) => {
  return (
    <>
      {state === "prev" && currentPage > limit && totalPage > limit && (
        <Button
          onPress={() => pageHandler(Math.floor(currentPage / limit) * limit)}
          className={twMerge(
            "w-6 px-4 flex justify-center items-center hover:bg-secondary"
          )}
        >
          ...
        </Button>
      )}
      {state === "next" &&
        Math.ceil(currentPage / limit) < Math.ceil(totalPage / limit) &&
        totalPage > limit && (
          <Button
            onPress={() =>
              pageHandler(Math.ceil(currentPage / limit) * limit + 1)
            }
            className={twMerge(
              "w-6 h-full px-4 flex justify-center items-center hover:bg-secondary"
            )}
          >
            ...
          </Button>
        )}
    </>
  );
};
```

```tsx|Implementation
export function PaginationImplementation() {
  const [currentPage, setCurrentPage] = useState<number>(1);
  return (
    <div className="w-full flex flex-col items-center justify-center gap-4">
      <Pagination
        initialPage={1}
        totalPage={12}
        pageChangeHandler={(val) => {
          setCurrentPage(val);
        }}
      />
      <span className="text-foreground">The current page is {currentPage}</span>
    </div>
  );
}
```
```jsx|Implementation
export function PaginationImplementation() {
  const [currentPage, setCurrentPage] = useState(1);
  return (
    <div className="w-full flex flex-col items-center justify-center gap-4">
      <Pagination
        initialPage={1}
        totalPage={12}
        pageChangeHandler={(val) => {
          setCurrentPage(val);
        }}
      />
      <span className="text-foreground">The current page is {currentPage}</span>
    </div>
  );
}
```
</CodeBlock>

## Pagination Props

| Name                | Type                | Description                                                           |
| ------------------- | ------------------- | --------------------------------------------------------------------- |
| `initialPage`       | `number`            | The initial page number to start from.                                |
| `totalPage`         | `number`            | The total number of pages available.                                  |
| `limit`             | `number` (optional) | The maximum number of page buttons to display at once. Default is 5.  |
| `pageChangeHandler` | `(page: number) => void` (optional) | Optional. Function to call when the page is changed.                       |


</Implementation>
</Wrapper>
import { Implementation, Preview, Display, TechnologyUsed, Wrapper, ImportsWrapper } from "@/components/mdx/MDXServerImports"
import { CodeBlock } from "@/components/mdx/MDXClientImports"

export const Data = {
  name: "useProcess",
  tags: [],
  description: "The useProcess hook is a custom React hook that provides a way to manage asynchronous processes in a React component. It returns an object with two properties: isProcessing and executeProcess. This hook is designed to help track the state of an asynchronous process and make subtle UI actions accordingly. By knowing whether a certain process is being executed or not, you can update the UI to provide a better user experience, such as displaying loading indicators, disabling buttons, etc.",
  version_included: "0.2.0",
  display: true
}

<Wrapper>

<ImportsWrapper>
import {Demo } from "@/packages/hooks/useProcess/Demo.tsx"

</ImportsWrapper>

<CodeBlock> 

```tsx|useProcess
"use client";

import { useCallback, useState } from "react";

interface UseProcessReturn {
  isProcessing: boolean;
  executeProcess: (callback: () => Promise<void>) => Promise<void>;
}

const useProcess = (): UseProcessReturn => {
  const [isProcessing, setIsProcessing] = useState<boolean>(false);

  const executeProcess = useCallback(
    async (callback: () => Promise<void>): Promise<void> => {
      try {
        setIsProcessing(true);
        await callback();
      } catch (error) {
        console.error("Error executing process:", error);
      } finally {
        setIsProcessing(false);
      }
    },
    []
  );

  return { isProcessing, executeProcess };
};

export default useProcess;
```

```jsx|useProcess
"use client";

import { useCallback, useState } from "react";

const useProcess = () => {
  const [isProcessing, setIsProcessing] = useState(false);

  const executeProcess = useCallback(
    async (callback) => {
      try {
        setIsProcessing(true);
        await callback();
      } catch (error) {
        console.error("Error executing process:", error);
      } finally {
        setIsProcessing(false);
      }
    },
    []
  );

  return { isProcessing, executeProcess };
};

export default useProcess;
```

```tsx|Implementation
"use client";

import { Button } from "@/packages/ui/Button";
import { IconProps } from "@/utils/constants";
import useDelay from "../useDelay/useDelay";
import useProcess from "./useProcess";

export function Demo() {
  const { delay } = useDelay();
  const { isProcessing, executeProcess } = useProcess();

  const handleAction = () => {
    executeProcess(async () => {
      // Do something
      // Delayed here just to show the loading state
      await delay(2000);
    });
  };

  return (
    <div className="flex justify-center items-center gap-6 text-center py-10">
      <Button
        onClick={handleAction}
        className="w-40 flex justify-center items-center"
      >
        {isProcessing ? (
          <LoaderIcon className="w-6 h-6 animate-spin" />
        ) : (
          "Click me"
        )}
      </Button>
    </div>
  );
}

const LoaderIcon = (props: IconProps) => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="1em"
      height="1em"
      viewBox="0 0 24 24"
      {...props}
    >
      <path
        fill="currentColor"
        d="M12 3a9 9 0 0 1 9 9h-2a7 7 0 0 0-7-7V3Z"
      ></path>
    </svg>
  );
};
```
```jsx|Implementation
"use client";

import { Button } from "@/packages/ui/Button";
import { IconProps } from "@/utils/constants";
import useDelay from "../useDelay/useDelay";
import useProcess from "./useProcess";

export function Demo() {
  const { delay } = useDelay();
  const { isProcessing, executeProcess } = useProcess();

  const handleAction = () => {
    executeProcess(async () => {
      // Do something
      // Delayed here just to show the loading state
      await delay(2000);
    });
  };

  return (
    <div className="flex justify-center items-center gap-6 text-center py-10">
      <Button
        onClick={handleAction}
        className="w-40 flex justify-center items-center"
      >
        {isProcessing ? (
          <LoaderIcon className="w-6 h-6 animate-spin" />
        ) : (
          "Click me"
        )}
      </Button>
    </div>
  );
}

const LoaderIcon = (props) => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="1em"
      height="1em"
      viewBox="0 0 24 24"
      {...props}
    >
      <path
        fill="currentColor"
        d="M12 3a9 9 0 0 1 9 9h-2a7 7 0 0 0-7-7V3Z"
      ></path>
    </svg>
  );
};
```
</CodeBlock>

## Properties

| Property | Type | Description |
| --- | --- | --- |
| isProcessing | boolean | A state variable indicating whether a process is currently executing or not. |
| executeProcess | (callback: () => Promise\<void>) => Promise\<void> | A function that takes in a callback function as an argument and executes the process asynchronously. It returns a Promise that resolves when the process is completed. |


<Display>
    <Demo/>
</Display>
</Wrapper>
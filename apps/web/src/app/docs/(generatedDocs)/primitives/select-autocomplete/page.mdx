import React, { Suspense, lazy } from 'react';
import { Implementation, Preview, WrapperToggle, Display, TechnologyUsed, Wrapper, Skeleton, PARTITION, Details, Provider, Title } from "@/components/mdx/MDXServerImports"
import { CodeBlock } from "@/components/mdx/MDXClientImports"

{/*
// ------------------------------------------------------------------------------------
    //	The text below is generated from "@/registry/primitives/select-autocomplete/01"
//------------------------------------------------------------------------------------
*/}

<Wrapper>
<Title>Autocomplete</Title>
### A customizable autocomplete component which combines a text input with a listbox, allowing users to filter a list of options to items matching a query.

<WrapperToggle >
<Preview>

export const Primitives_select_autocomplete_01 = lazy(() => import("@registry/packages/primitives/select-autocomplete/01/react_aria-ts/example"));


<Suspense fallback={<Skeleton className="h-60 rounded-lg" />}>
<Display>
<Primitives_select_autocomplete_01 />
</Display>
</Suspense>

</Preview>

<Implementation>

<TechnologyUsed technologies={["tailwind-merge","react-aria-components"]} />
<CodeBlock variant="autocomplete">

```react_aria|js|example.jsx
"use client";

import {
  Autocomplete,
  AutocompleteHeader,
  AutocompleteItem,
  AutocompleteList,
  AutocompleteSearch,
} from "@registry/packages/primitives/select-autocomplete/01/react_aria-js/Select";
import { Section } from "react-aria-components";

export default function AutocompleteImplementation() {
  return (
    <Autocomplete label="Ice cream flavor">
      <AutocompleteSearch />
      <AutocompleteList className="min-w-60">
        <Section>
          <AutocompleteHeader>Ice-cream flavor</AutocompleteHeader>
          <AutocompleteItem textValue="Mint">Mint</AutocompleteItem>
          <AutocompleteItem textValue="Strawberry" isDisabled>
            Strawberry
          </AutocompleteItem>
          <AutocompleteItem textValue="Vanilla">Vanilla</AutocompleteItem>
          <AutocompleteItem textValue="Chocolate">Chocolate</AutocompleteItem>
        </Section>
      </AutocompleteList>
    </Autocomplete>
  );
}

```

```react_aria|js|Select.jsx
"use client";

import { useRef, useState } from "react";
import {
  Button,
  ComboBox,
  FieldError,
  Header,
  Input,
  Label,
  ListBox,
  ListBoxItem,
  Popover,
  Separator,
  Text,
} from "react-aria-components";
import { twMerge } from "tailwind-merge";

export function Autocomplete({ children, className, ...props }) {
  return (
    <ComboBox className={twMerge("flex flex-col gap-1", className)} {...props}>
      {props.label && <Label className="text-primary-foreground">{props.label}</Label>}
      {children}
      {props.description && (
        <Text slot="description" className="text-primary-foreground text-sm">
          {props.description}
        </Text>
      )}
      <FieldError className="text-sm text-error">{props.errorMessage}</FieldError>
    </ComboBox>
  );
}

export function AutocompleteList({ items, children, className, ...props }) {
  return (
    <Popover>
      <ListBox
        items={items}
        className={twMerge(
          "w-full bg-primary border border-outline-secondary py-1 rounded focus:outline-none",
          className,
        )}
        {...props}
      >
        {children}
      </ListBox>
    </Popover>
  );
}

export function AutocompleteItem({ className, ...props }) {
  return (
    <ListBoxItem
      className={twMerge(
        "p-1 mx-1 rounded hover:bg-secondary hover:outline-none focus:bg-secondary focus:outline-none text-primary-foreground disabled:opacity-50 hover:cursor-pointer",
        className,
      )}
      {...props}
    >
      {props.children}
    </ListBoxItem>
  );
}

export function AutocompleteHeader({ children, className }) {
  return <Header className={twMerge("text-primary-foreground p-1 mx-1 mb-2", className)}>{children}</Header>;
}

export function AutocompleteDivider({ className }) {
  return <Separator className={twMerge("min-w-full  border-b-[1px] border-outline my-2", className)} />;
}

export function AutocompleteSearch({ listToggleWithButton = false }) {
  const [focus, setFocus] = useState(false);
  const buttonRef = useRef(null);
  const onFocus = () => {
    if (listToggleWithButton) return;
    if (buttonRef.current && !focus) {
      buttonRef.current.click();
      setFocus(true);
    } else {
      setFocus(false);
    }
  };
  return (
    <div className="flex flex-row gap-2 relative">
      <Input
        className="w-full py-2 px-2 bg-transparent border-2 rounded focus:outline-none focus:ring-2 text-foreground placeholder:text-secondary-foreground border-outline-secondary  hover:border-outline focus:border-accent pr-12 z-0 disabled:opacity-50 disabled:cursor-not-allowed disabled:border-muted-secondary"
        placeholder="Search for flavor"
        onFocus={() => onFocus()}
        onBlur={() => onFocus()}
      />
      <Button
        ref={buttonRef}
        aria-hidden={!listToggleWithButton}
        className={twMerge(
          "rounded bg-primary text-primary-foreground hover:bg-secondary absolute inset-y-0 right-1 flex items-center justify-center  h-max w-max p-2 my-auto",
          !listToggleWithButton && "hidden",
        )}
      >
        <Chevron className="w-4 h-4 rotate-180" />
      </Button>
    </div>
  );
}

const Chevron = (props) => (
  <svg height="200" width="200" viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg" {...props}>
    <title>Chevron</title>
    <path
      d="M7.538 1c-.294 0-.488.177-.615.385l-5.846 9.538C1 11 1 11.153 1 11.308c0 .538.385.692.692.692h11.616c.384 0 .692-.154.692-.692c0-.154 0-.231-.077-.385l-5.77-9.538C8.029 1.177 7.789 1 7.539 1z"
      fill="currentColor"
    />
  </svg>
);

```

```react_aria|ts|example.tsx
"use client";

import {
  Autocomplete,
  AutocompleteHeader,
  AutocompleteItem,
  AutocompleteList,
  AutocompleteSearch,
} from "@registry/packages/primitives/select-autocomplete/01/react_aria-ts/Select";
import { Section } from "react-aria-components";

export default function AutocompleteImplementation() {
  return (
    <Autocomplete label="Ice cream flavor">
      <AutocompleteSearch />
      <AutocompleteList className="min-w-60">
        <Section>
          <AutocompleteHeader>Ice-cream flavor</AutocompleteHeader>
          <AutocompleteItem textValue="Mint">Mint</AutocompleteItem>
          <AutocompleteItem textValue="Strawberry" isDisabled>
            Strawberry
          </AutocompleteItem>
          <AutocompleteItem textValue="Vanilla">Vanilla</AutocompleteItem>
          <AutocompleteItem textValue="Chocolate">Chocolate</AutocompleteItem>
        </Section>
      </AutocompleteList>
    </Autocomplete>
  );
}

```

```react_aria|ts|Select.tsx
"use client";

import type { IconProps } from "@registry/utils/types";
import { useRef, useState } from "react";
import {
  Button,
  ComboBox,
  type ComboBoxProps,
  FieldError,
  Header,
  Input,
  Label,
  ListBox,
  ListBoxItem,
  type ListBoxItemProps,
  type ListBoxProps,
  Popover,
  Separator,
  Text,
} from "react-aria-components";
import { twMerge } from "tailwind-merge";

export interface AutocompleteProps extends ComboBoxProps<any> {
  label?: string;
  description?: string;
  errorMessage?: string;
}

export function Autocomplete({ children, className, ...props }: AutocompleteProps) {
  return (
    <ComboBox className={twMerge("flex flex-col gap-1", className as string)} {...props}>
      {props.label && <Label className="text-primary-foreground">{props.label}</Label>}
      {children as React.ReactElement}
      {props.description && (
        <Text slot="description" className="text-primary-foreground text-sm">
          {props.description}
        </Text>
      )}
      <FieldError className="text-sm text-error">{props.errorMessage}</FieldError>
    </ComboBox>
  );
}

export function AutocompleteList({ items, children, className, ...props }: ListBoxProps<any>) {
  return (
    <Popover>
      <ListBox
        items={items}
        className={twMerge(
          "w-full bg-primary border border-outline-secondary py-1 rounded focus:outline-none",
          className as string,
        )}
        {...props}
      >
        {children}
      </ListBox>
    </Popover>
  );
}

export function AutocompleteItem({ className, ...props }: ListBoxItemProps) {
  return (
    <ListBoxItem
      className={twMerge(
        "p-1 mx-1 rounded hover:bg-secondary hover:outline-none focus:bg-secondary focus:outline-none text-primary-foreground disabled:opacity-50 hover:cursor-pointer",
        className as string,
      )}
      {...props}
    >
      {props.children}
    </ListBoxItem>
  );
}

export function AutocompleteHeader({
  children,
  className,
}: {
  children: React.ReactNode;
  className?: string;
}) {
  return <Header className={twMerge("text-primary-foreground p-1 mx-1 mb-2", className)}>{children}</Header>;
}

export function AutocompleteDivider({ className }: { className?: string }) {
  return <Separator className={twMerge("min-w-full  border-b-[1px] border-outline my-2", className)} />;
}

export function AutocompleteSearch({
  listToggleWithButton = false,
}: {
  listToggleWithButton?: boolean;
}) {
  const [focus, setFocus] = useState<boolean>(false);
  const buttonRef = useRef<HTMLButtonElement>(null);
  const onFocus = () => {
    if (listToggleWithButton) return;
    if (buttonRef.current && !focus) {
      buttonRef.current.click();
      setFocus(true);
    } else {
      setFocus(false);
    }
  };
  return (
    <div className="flex flex-row gap-2 relative">
      <Input
        className="w-full py-2 px-2 bg-transparent border-2 rounded focus:outline-none focus:ring-2 text-foreground placeholder:text-secondary-foreground border-outline-secondary  hover:border-outline focus:border-accent pr-12 z-0 disabled:opacity-50 disabled:cursor-not-allowed disabled:border-muted-secondary"
        placeholder="Search for flavor"
        onFocus={() => onFocus()}
        onBlur={() => onFocus()}
      />
      <Button
        ref={buttonRef}
        aria-hidden={!listToggleWithButton}
        className={twMerge(
          "rounded bg-primary text-primary-foreground hover:bg-secondary absolute inset-y-0 right-1 flex items-center justify-center  h-max w-max p-2 my-auto",
          !listToggleWithButton && "hidden",
        )}
      >
        <Chevron className="w-4 h-4 rotate-180" />
      </Button>
    </div>
  );
}

const Chevron = (props: IconProps) => (
  <svg height="200" width="200" viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg" {...props}>
    <title>Chevron</title>
    <path
      d="M7.538 1c-.294 0-.488.177-.615.385l-5.846 9.538C1 11 1 11.153 1 11.308c0 .538.385.692.692.692h11.616c.384 0 .692-.154.692-.692c0-.154 0-.231-.077-.385l-5.77-9.538C8.029 1.177 7.789 1 7.539 1z"
      fill="currentColor"
    />
  </svg>
);

```

</CodeBlock>
<Details>

<Provider tag="react_aria">
## Autocomplete

| Name         | Type     | Default | Description                                                            |
| ------------ | -------- | ------- | ---------------------------------------------------------------------- |
| label        | `string` |         | The label for the autocomplete input.                                  |
| description  | `string` |         | A description providing additional information about the autocomplete. |
| errorMessage | `string` |         | An error message to display if the autocomplete value is invalid.      |
| className    | `string` |         | Additional classes to apply for custom styling.                        |

## AutocompleteList

| Name      | Type     | Default | Description                                        |
| --------- | -------- | ------- | -------------------------------------------------- |
| items     | `any[]`  |         | The list of items to be displayed in the dropdown. |
| className | `string` |         | Additional classes to apply for custom styling.    |

## AutocompleteItem

| Name      | Type              | Default | Description                                     |
| --------- | ----------------- | ------- | ----------------------------------------------- |
| className | `string`          |         | Additional classes to apply for custom styling. |
| children  | `React.ReactNode` |         | The content to display within the item.         |

## AutocompleteHeader

| Name      | Type              | Default | Description                                     |
| --------- | ----------------- | ------- | ----------------------------------------------- |
| className | `string`          |         | Additional classes to apply for custom styling. |
| children  | `React.ReactNode` |         | The content to display within the header.       |

## AutocompleteDivider

| Name      | Type     | Default | Description                                     |
| --------- | -------- | ------- | ----------------------------------------------- |
| className | `string` |         | Additional classes to apply for custom styling. |

## AutocompleteSearch

| Name                 | Type      | Default | Description                                                                             |
| -------------------- | --------- | ------- | --------------------------------------------------------------------------------------- |
| listToggleWithButton | `boolean` | `false` | Determines whether the list is toggled with a button or by focusing on the input field. |

Check out the [React Aria Combobox](https://react-spectrum.adobe.com/react-aria/ComboBox.html) for more information.

</Provider>

</Details>
</Implementation>
</WrapperToggle>
</Wrapper>

import { CODE } from "@/components/mdx/CodeSimple";
import {Title, PARTITION} from "@/components/mdx/MDXServerImports";
import { FileTreeStructure } from "@/components/mdx/FileTreeStructure";

# Contributing

<PARTITION className="flex flex-col gap-4">
    This contributing doc contains every thing that you require to setup the codebase on your machine to how it is structured. It describes every aspects of the codebase, the choice of the technologies, the structure of codebase and the reasoning behind it. 

    I thank each and every contributors that have and will contribute to the project.
</PARTITION>

<PARTITION className="mt-4 flex flex-col gap-4">
    <Title className="text-3xl mb-4">Installation</Title>

    To begin with the installation we use the turborepo for maintaining the entire monorepo. Additional details of the file structure are described below in the file structure section.
    Follow the following steps to install and run the project steadily:

    <span className="text-primary-foreground text-lg">Step 1: Clone the repository</span>
    <CODE>
    ```bash|bash
    git clone https://github.com/krishpatel023/StratikUI.git
    ```
    </CODE>

    <span className="text-primary-foreground text-lg mt-4">Step 2: Install it like a normal repo</span>
    <CODE>
    ```bash|bash
    npm install
    ```
    </CODE>

    <span className="text-primary-foreground text-lg mt-4">Step 3: Setup the env variables</span>

    Go the apps/web/ and create `.env.local` and copy the following there

    <CODE>
    ```apps/web/.env.local|bash
    NODE_ENV=development
    NEXT_PUBLIC_NODE_ENV=development
    NEXT_PUBLIC_POSTHOG_KEY=test_key
    NEXT_PUBLIC_POSTHOG_HOST=https://posthog.com
    ```
    </CODE>

    <span className="text-primary-foreground text-lg mt-4">Step 4: Run the dev command</span>

    <CODE>
    ```bash|bash
    turbo dev
    ```
    </CODE>
    This will start two servers the first one will be on [Port 3000](http://localhost:3000) if no other server is running and the other one will be on [Port 3001](http://localhost:3001). The post 3000 runs the internal registry where you can test all the components you create and the port 3001 will be the main website of Stratik UI.
</PARTITION>

<PARTITION className="mt-10 flex flex-col gap-4">
    <Title className="text-3xl mb-4">Technology used </Title>

    We use turborepo to manage our monorepo. There are mainly two applications:
    ## Registry

    It is built using Next 14.2 along with tailwind and typescript. The `src/packages` folder contains the source code of the components that are present in the Stratik UI Library.
    It uses tsx for running custom scripts with ES6 module system than CommanJS module system.

    ## Web

    The web contains the entire documentation website and the homepage as well. It uses Next 14.2, TailwindCSS, MDX, and Posthog for analytics. It also contains framer-motion, container-queries, fuse.js for searching, shiki for code highlighting and much more.  

</PARTITION>

<PARTITION className="mt-10 flex flex-col gap-4">
    <Title className="text-3xl mb-6">File Structure</Title>
    <FileTreeStructure />
</PARTITION>

<PARTITION className="mt-10 flex flex-col gap-4">
    <Title className="text-3xl mb-2">Generating the docs</Title>

    The generation of the documentation means generating the various aspects of the application using custon scripts. There are four commands in total and I'll explain each one in detail -

    <PARTITION className="flex flex-col gap-4">
        ## Generating the Docs 

        This is executed by the `apps/registry/src/scripts/generateDocs.ts` and the output directory is `apps/web/src/app/docs/(generatedDocs)/` . It's main role is to generate the entire documentation from the registry in a particular order and without any error. 

        Reasoning : It becomes difficult to maintain the documentation at scale and is even tougher to maintain the code block for it. For example, if there is a minor change in the code of the component then you will need to find that in the documentation and fix it there also. This will create a lot of difficulty in maintaining the codebase and might result into negligence to change the code block. In the current implementation, you don't need to maintain the entire documentation. Just write the necessary documentation individually as shown in the above section and let the code and other formatting be handled by a script. This prevents lots of errors and is highly maintainable at scale.

        The command for the following is : 

        <CODE>
        ```bash|bash
        npm run generate:docs
        ```
        </CODE>
    </PARTITION>

    <PARTITION className="flex flex-col gap-4">
        ## Generating the Sidebar Data

        This is executed by the `apps/registry/src/scripts/generateSidebarData.ts` and the output file is `apps/web/src/data/generated/generated-sidebar.ts` . It's main role is to generate the sidebar data and maintain it properly.

        Reasoning: When adding or removing a category/group from the package you need to also maintain the sidebar and this results into a lot of things to take care of. This can be used by removing the need to maintain it manually and by running the following script you can maintain an up to date data for the sidebar.

        The command for the following is : 

        <CODE>
        ```bash|bash
        npm run generate:sidebar
        ```
        </CODE>
    </PARTITION>

    <PARTITION className="flex flex-col gap-4">
        ## Generating the Search Data

        This is executed by the `apps/registry/src/scripts/generateSearchData.ts` and the output file is `apps/web/src/data/generated/generated-search.ts` . It's main role is to generate the search data for the search functionality.

        For the searching, we use [fuse.js](https://www.fusejs.io/) and thus we need to have a data file in which the search can be done and hence we generate that using this script.

        The command for the following is :

        <CODE>
        ```bash|bash
        npm run generate:search
        ```
        </CODE>
    </PARTITION>

    <PARTITION className="flex flex-col gap-4">
        ## Generating all three at once

        This command helps to run all three at once and eliminates the need to run them individually. It does nothing different as behind the scenes, it runs all three scripts in one command. It's just for convenience.

        <CODE>
        ```bash|bash
        npm run generate:data
        ```
        </CODE>
    </PARTITION>
</PARTITION>